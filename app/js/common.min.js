jQuery(document).ready(function(s){function t(){if(window.matchMedia("(min-width: 768px)").matches){var e=s(".news-tabs__list").innerHeight();s(".news-tabs__all").css("top",e+5)}else s(".news-tabs__all").removeAttr("style")}function a(){window.matchMedia("(min-width: 768px)").matches?(s(".zoomContainer").remove(),s(".product-gallery__img img").elevateZoom({zoomType:"lens",containLensZoom:!0,responsive:!0})):s(".zoomContainer").remove()}s(".nav-toggle").on("click",function(e){e.preventDefault(),s(this).toggleClass("active"),s(".mobile-menu").toggleClass("open"),s("body").toggleClass("active")}),s(".mobile-menu__caret").click(function(){s(this).parent().toggleClass("active")}),s(window).scroll(function(){var e=s(".top-menu").outerHeight();150<s(this).scrollTop()?(s("body").css("margin-top",e),s(".top-menu").addClass("sticky")):(s("body").css("margin-top",0),s(".top-menu").removeClass("sticky"))}),s(".news-tabs").tabslet({autorotate:!0,delay:5e3}),setTimeout(function(){t()},500),s(".product-tabs").tabslet(),a(),s(window).resize(function(e){a(),t()});var n=0;function i(e){var t=s(".cart__step");t.length;s(t[e]).css("display","block"),s(".cart__step-list li").eq(e).addClass("active"),0==e?(s(".cart__btn-prev").css("display","none"),s(".cart__continue").css("display","inline-block")):(s(".cart__continue").css("display","none"),s(".cart__btn-prev").css("display","inline-block")),e==t.length-1?s(".cart__btn-next span").text("Оформить заказ").parent().find("i").css("display","none"):s(".cart__btn-next span").text("Далле").parent().find("i").css("display","inline-block")}function r(e){var t=s(".cart__step");if(s(t[n]).css("display","none"),s(".cart__step-list li").eq(n).removeClass("active"),(n+=e)>=t.length)return!1;i(n)}function o(){var a=0;s(".cart__item-sum span").each(function(e,t){a+=parseInt(s(t).text(),10)}),s(".cart__total span").text(a)}i(n),s(".cart__btn-prev").click(function(e){e.preventDefault(),r(-1)}),s(".cart__btn-next").click(function(e){if(e.preventDefault(),n+1>s(".cart__step").length-1)return s(".cart-form").submit(),!1;s(".cart-form").validate({messages:{spare:"Это поле обязательное",spare_2:"Это поле обязательное",name:"Введите Ваше имя",email:"Введите Ваш E-mail",phone:"Введите Ваш телефон",terms:"Вы должны быть согласны"},submitHandler:function(e){console.log("submit");var t=s(".cart-form").serialize();l(".cart-form",t)}}),s(".cart-form").valid()&&r(1)}),s("a[data-fancybox]").fancybox(),s(".scroll-top").click(function(){return s("html, body").animate({scrollTop:0},"slow"),!1}),s(window).scroll(function(){500<s(this).scrollTop()?s(".scroll-top").addClass("active"):s(".scroll-top").removeClass("active")}),function(){if(s(window).width()<=992){var e=s(".news-list__content").find("p").text();87<e.length&&s(".news-list__content").find("p").text(e.substring(0,84)+"...")}else s(".news-list__content").find("p").text(e)}(),s(".sorting__view--grid").click(function(e){e.preventDefault(),s(".sorting__view").removeClass("active"),s(this).addClass("active"),s(".product-list").removeClass("grid line list").addClass("grid")}),s(".sorting__view--list").click(function(e){e.preventDefault(),s(".sorting__view").removeClass("active"),s(this).addClass("active"),s(".product-list").removeClass("grid line list").addClass("list")}),s(".sorting__view--line").click(function(e){e.preventDefault(),s(".sorting__view").removeClass("active"),s(this).addClass("active"),s(".product-list").removeClass("grid line list").addClass("line")}),s(document).on("click",".quantity-container button",function(e){e.preventDefault();var t=s(this),a=t.siblings(".quantity"),n=parseInt(a.val()&&0<a.val()?a.val():0,10),i=parseInt(a.attr("min"),10),r=parseInt(a.attr("max"),10);i=i||0,r=r||n+1,t.hasClass("quantity__minus")&&i<n&&(a.val(n-1),a.trigger("change"),$price=t.parent().parent().find(".cart__price").data("price"),$price=t.parent().parent().parent().find(".cart__price").data("price"),t.parent().parent().next().find("span").text($price*a.val()),o()),t.hasClass("quantity__plus")&&n<r&&(a.val(n+1),a.trigger("change"),$price=t.parent().parent().parent().find(".cart__price").data("price"),t.parent().parent().next().find("span").text($price*a.val()),o())}),o(),s(".product-gallery__thumbnails img").click(function(){var e=s(this).data("large_image");s(".product-gallery__img img").fadeOut(300,function(e,t){var t=t,e=e;if(setTimeout(function(){t.attr("src",e),t.attr("data-large_image",e),t.parent().attr("href",e),t.fadeIn(300)},300),"default"!=s(".product-gallery__img").data("zoomstyle")){var a=s(".product-gallery__img img").data("elevateZoom");a.swaptheimage(e,e)}}(e,s(".product-gallery__img img")))}),s(".form-search__vin").click(function(e){e.preventDefault(),s(".form-search-vin-wrap").toggleClass("open")}),s(".modal").popup({transition:"all 0.3s",scrolllock:!0,autozindex:!0,onclose:function(){s(this).find("label.error").remove()}});new Swiper(".product-gallery__thumbnails",{slidesPerView:4,spaceBetween:15,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});function l(e,t){jQuery.ajax({type:"POST",url:"sendmail.php",data:t,success:function(){s(".modal").popup("hide"),".cart-form"==e?s("#thanks-order").popup("show"):s("#thanks").popup("show"),setTimeout(function(){s(e).trigger("reset")},2e3)}})}s("input[name='price']").keydown(function(e){-1!==s.inArray(e.keyCode,[46,8,9,27,13,110,190])||65==e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||67==e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||88==e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||35<=e.keyCode&&e.keyCode<=39||(e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault()}),s(".form__field, .form__textarea").focus(function(){s(this).prev(".form__label").addClass("is-focus")}),s(".form__field, .form__textarea").focusout(function(){""==s(this).val()&&s(this).prev(".form__label").removeClass("is-focus")}),s(".form__field, .form__textarea").each(function(e,t){s(t).attr("required")&&s(this).parent().append('<span class="form__required">*</span>')}),s('input[type="tel"]').mask("+7 (000) 000-00-00",{selectOnFocus:!0}),jQuery.validator.addMethod("phoneno",function(e,t){return this.optional(t)||e.match(/\+[0-9]{1}\s\([0-9]{3}\)\s[0-9]{3}-[0-9]{2}-[0-9]{2}/)},"Введите Ваш телефон"),s(".callback-form").validate({messages:{name:"Введите Ваше имя",phone:"Введите Ваш телефон"},rules:{phone:{required:!0,phoneno:!0}},submitHandler:function(e){l(".callback-form",s(".callback-form").serialize())}}),s(".question-form").validate({messages:{name:"Введите Ваше имя",email:"Введите Ваш E-mail",question:"Введите Ваш вопрос"},submitHandler:function(e){l(".question-form",s(".question-form").serialize())}}),s(".you-pice-form").validate({messages:{name:"Введите Ваше имя",email:"Введите Ваш E-mail",price:"Введите желаемую цену"},submitHandler:function(e){l(".you-pice-form",s(".you-pice-form").serialize())}}),s(".form-search-vin").validate({messages:{vin_organization_name:"Это поле обязательное",email:"Введите Ваш E-mail",model_car:"Введите марку и модель автомобиля",vin_parts:"Это поле обязательное"},submitHandler:function(e){l(".form-search-vin",s(".form-search-vin").serialize())}})}),function(e,t){"use strict";if(!t.createElementNS||!t.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)return;var a,n,i="localStorage"in e&&null!==e.localStorage,r=function(){t.body.insertAdjacentHTML("afterbegin",n)},s=function(){t.body?r():t.addEventListener("DOMContentLoaded",r)};if(i&&1.1==localStorage.getItem("inlineSVGrev")&&(n=localStorage.getItem("inlineSVGdata")))return s();try{(a=new XMLHttpRequest).open("GET","img/symbols.html",!0),a.onload=function(){200<=a.status&&a.status<400&&(n=a.responseText,s(),i&&(localStorage.setItem("inlineSVGdata",n),localStorage.setItem("inlineSVGrev",1.1)))},a.send()}catch(e){}}(window,document);