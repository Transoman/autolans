jQuery(document).ready(function(s){function e(){s(".product-gallery__img img").elevateZoom({zoomType:"lens",containLensZoom:!0})}s(".nav-toggle").on("click",function(t){t.preventDefault(),s(this).toggleClass("active"),s(".mobile-menu").toggleClass("open"),s("body").toggleClass("active")}),s(window).scroll(function(){var t=s(".top-menu").outerHeight();150<s(this).scrollTop()?(s("body").css("margin-top",t),s(".top-menu").addClass("sticky")):(s("body").css("margin-top",0),s(".top-menu").removeClass("sticky"))}),s(".news-tabs").tabslet({autorotate:!0,delay:5e3}),s(".product-tabs").tabslet(),e(),s(window).resize(function(t){e()});var a=0;function n(t){var e=s(".cart__step");e.length;s(e[t]).css("display","block"),s(".cart__step-list li").eq(t).addClass("active"),0==t?(s(".cart__btn-prev").css("display","none"),s(".cart__continue").css("display","inline-block")):(s(".cart__continue").css("display","none"),s(".cart__btn-prev").css("display","inline-block")),t==e.length-1?s(".cart__btn-next span").text("Оформить заказ").parent().find("i").css("display","none"):s(".cart__btn-next span").text("Далле").parent().find("i").css("display","inline-block")}function i(t){var e=s(".cart__step");if(s(e[a]).css("display","none"),s(".cart__step-list li").eq(a).removeClass("active"),(a+=t)>=e.length)return!1;n(a)}n(a),s(".cart__btn-prev").click(function(t){t.preventDefault(),i(-1)}),s(".cart__btn-next").click(function(t){if(t.preventDefault(),a+1>s(".cart__step").length-1)return s(".cart-form").submit(),!1;i(1)}),s("a[data-fancybox]").fancybox(),s(".scroll-top").click(function(){return s("html, body").animate({scrollTop:0},"slow"),!1}),s(window).scroll(function(){500<s(this).scrollTop()?s(".scroll-top").addClass("active"):s(".scroll-top").removeClass("active")}),function(){if(s(window).width()<=992){var t=s(".news-list__content").find("p").text();87<t.length&&s(".news-list__content").find("p").text(t.substring(0,84)+"...")}else s(".news-list__content").find("p").text(t)}(),s(".sorting__view--grid").click(function(t){t.preventDefault(),s(".sorting__view").removeClass("active"),s(this).addClass("active"),s(".product-list").removeClass("grid line list").addClass("grid")}),s(".sorting__view--list").click(function(t){t.preventDefault(),s(".sorting__view").removeClass("active"),s(this).addClass("active"),s(".product-list").removeClass("grid line list").addClass("list")}),s(".sorting__view--line").click(function(t){t.preventDefault(),s(".sorting__view").removeClass("active"),s(this).addClass("active"),s(".product-list").removeClass("grid line list").addClass("line")}),s(document).on("click",".quantity-container button",function(t){t.preventDefault();var e=s(this),a=e.siblings(".quantity"),n=parseInt(a.val()&&0<a.val()?a.val():0,10),i=parseInt(a.attr("min"),10),r=parseInt(a.attr("max"),10);i=i||0,r=r||n+1,e.hasClass("quantity__minus")&&i<n&&(a.val(n-1),a.trigger("change"),$price=e.parent().parent().find(".cart__price").data("price"),$price=e.parent().parent().parent().find(".cart__price").data("price"),e.parent().parent().next().find("span").text($price*a.val())),e.hasClass("quantity__plus")&&n<r&&(a.val(n+1),a.trigger("change"),$price=e.parent().parent().parent().find(".cart__price").data("price"),e.parent().parent().next().find("span").text($price*a.val()))}),s(".product-gallery__thumbnails img").click(function(){var t=s(this).data("large_image");s(".product-gallery__img img").fadeOut(300,function(t,e){var e=e,t=t;if(setTimeout(function(){e.attr("src",t),e.attr("data-large_image",t),e.parent().attr("href",t),e.fadeIn(300)},300),"default"!=s(".product-gallery__img").data("zoomstyle")){var a=s(".product-gallery__img img").data("elevateZoom");a.swaptheimage(t,t)}}(t,s(".product-gallery__img img")))}),s(".form-search__vin").click(function(t){t.preventDefault(),s(".form-search-vin-wrap").toggleClass("open")}),s(".modal").popup({transition:"all 0.3s",onclose:function(){s(this).find("label.error").remove()}});new Swiper(".product-gallery__thumbnails",{slidesPerView:4,spaceBetween:15,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});function r(t,e){jQuery.ajax({type:"POST",url:"sendmail.php",data:e,success:function(){s(".modal").popup("hide"),s("#thanks").popup("show"),setTimeout(function(){s(t).trigger("reset")},2e3)}})}s(".form__field, .form__textarea").focus(function(){s(this).prev(".form__label").addClass("is-focus")}),s(".form__field, .form__textarea").focusout(function(){""==s(this).val()&&s(this).prev(".form__label").removeClass("is-focus")}),s(".form__field, .form__textarea").each(function(t,e){s(e).attr("required")&&s(this).parent().append('<span class="form__required">*</span>')}),s('input[type="tel"]').mask("+7 (000) 000-00-00",{selectOnFocus:!0}),jQuery.validator.addMethod("phoneno",function(t,e){return this.optional(e)||t.match(/\+[0-9]{1}\s\([0-9]{3}\)\s[0-9]{3}-[0-9]{2}-[0-9]{2}/)},"Введите Ваш телефон"),s(".callback-form").validate({messages:{name:"Введите Ваше имя",phone:"Введите Ваш телефон"},rules:{phone:{required:!0,phoneno:!0}},submitHandler:function(t){r(".callback-form",s(".callback-form").serialize())}}),s(".form-search-vin").validate({messages:{vin_organization_name:"Это поле обязательное",email:"Введите Ваш E-mail",model_car:"Введите марку и модель автомобиля",vin_parts:"Это поле обязательное"},submitHandler:function(t){r(".form-search-vin",s(".form-search-vin").serialize())}})}),function(t,e){"use strict";if(!e.createElementNS||!e.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)return;var a,n,i="localStorage"in t&&null!==t.localStorage,r=function(){e.body.insertAdjacentHTML("afterbegin",n)},s=function(){e.body?r():e.addEventListener("DOMContentLoaded",r)};if(i&&1.5==localStorage.getItem("inlineSVGrev")&&(n=localStorage.getItem("inlineSVGdata")))return s();try{(a=new XMLHttpRequest).open("GET","img/symbols.html",!0),a.onload=function(){200<=a.status&&a.status<400&&(n=a.responseText,s(),i&&(localStorage.setItem("inlineSVGdata",n),localStorage.setItem("inlineSVGrev",1.5)))},a.send()}catch(t){}}(window,document);